/*C2*/SET SCHEMA PUBLIC
drop table if exists Fiche CASCADE 
drop table if exists Section CASCADE 
drop table if exists Tableau CASCADE 
drop table if exists TypeSondage CASCADE 
drop table if exists User CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Fiche (idFiche bigint not null, dateButoir varchar(255), description varchar(255), libelle varchar(255), lieu varchar(255), tags varchar(255), url varchar(255), section_idSection bigint, primary key (idFiche))
create table Section (idSection bigint not null, name varchar(255), tableau_idTableau bigint, primary key (idSection))
create table Tableau (idTableau bigint not null, name varchar(255), user_idUser bigint, primary key (idTableau))
create table TypeSondage (sondage_type varchar(31) not null, idSondage bigint generated by default as identity (start with 1), libelle varchar(255), nbreSondage integer not null, primary key (idSondage))
create table User (idUser bigint not null, age integer not null, nom varchar(255), prenom varchar(255), primary key (idUser))
alter table Fiche add constraint FKi4eiurt1ecfdlsaojblf5d9fv foreign key (section_idSection) references Section
alter table Section add constraint FKgnvjc68f5bqqr1q9n3jpsko1r foreign key (tableau_idTableau) references Tableau
alter table Tableau add constraint FK22jwbpdvfxemiupfyj01ymmy6 foreign key (user_idUser) references User
/*C3*/SET SCHEMA PUBLIC
drop table if exists Fiche CASCADE 
drop table if exists Section CASCADE 
drop table if exists Tableau CASCADE 
drop table if exists TypeSondage CASCADE 
drop table if exists User CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Fiche (idFiche bigint not null, dateButoir varchar(255), description varchar(255), libelle varchar(255), lieu varchar(255), tags varchar(255), url varchar(255), section_idSection bigint, primary key (idFiche))
create table Section (idSection bigint not null, name varchar(255), tableau_idTableau bigint, primary key (idSection))
create table Tableau (idTableau bigint not null, name varchar(255), user_idUser bigint, primary key (idTableau))
create table TypeSondage (sondage_type varchar(31) not null, idSondage bigint generated by default as identity (start with 1), libelle varchar(255), nbreSondage integer not null, primary key (idSondage))
create table User (idUser bigint not null, age integer not null, nom varchar(255), prenom varchar(255), primary key (idUser))
alter table Fiche add constraint FKi4eiurt1ecfdlsaojblf5d9fv foreign key (section_idSection) references Section
alter table Section add constraint FKgnvjc68f5bqqr1q9n3jpsko1r foreign key (tableau_idTableau) references Tableau
alter table Tableau add constraint FK22jwbpdvfxemiupfyj01ymmy6 foreign key (user_idUser) references User
INSERT INTO USER VALUES(3,20,'Bah','Adama')
INSERT INTO TABLEAU VALUES(2,'Kanban',3)
INSERT INTO SECTION VALUES(1,'En Attente',2)
INSERT INTO FICHE VALUES(4,'2021-03-21','Une liste des choses que nous pensons vouloir faire','Conception','Rennes','tags','https://trello.com/b/YAgZ49uf/mod%C3%A8le-kanban',1)
INSERT INTO TYPESONDAGE VALUES('D',1,'Sondage date',45)
INSERT INTO TYPESONDAGE VALUES('L',2,'Sondage lieu',50)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 5
COMMIT
DISCONNECT
/*C2*/DISCONNECT
/*C4*/SET SCHEMA PUBLIC
drop table if exists Fiche CASCADE 
drop table if exists Section CASCADE 
drop table if exists Tableau CASCADE 
drop table if exists TypeSondage CASCADE 
drop table if exists User CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Fiche (idFiche bigint not null, dateButoir varchar(255), description varchar(255), libelle varchar(255), lieu varchar(255), tags varchar(255), url varchar(255), section_idSection bigint, primary key (idFiche))
create table Section (idSection bigint not null, name varchar(255), tableau_idTableau bigint, primary key (idSection))
create table Tableau (idTableau bigint not null, name varchar(255), user_idUser bigint, primary key (idTableau))
create table TypeSondage (sondage_type varchar(31) not null, idSondage bigint generated by default as identity (start with 1), libelle varchar(255), nbreSondage integer not null, primary key (idSondage))
create table User (idUser bigint not null, age integer not null, nom varchar(255), prenom varchar(255), primary key (idUser))
alter table Fiche add constraint FKi4eiurt1ecfdlsaojblf5d9fv foreign key (section_idSection) references Section
alter table Section add constraint FKgnvjc68f5bqqr1q9n3jpsko1r foreign key (tableau_idTableau) references Tableau
alter table Tableau add constraint FK22jwbpdvfxemiupfyj01ymmy6 foreign key (user_idUser) references User
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
drop table if exists Fiche CASCADE 
drop table if exists Section CASCADE 
drop table if exists Tableau CASCADE 
drop table if exists TypeSondage CASCADE 
drop table if exists User CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Fiche (idFiche bigint not null, dateButoir varchar(255), description varchar(255), libelle varchar(255), lieu varchar(255), tags varchar(255), url varchar(255), section_idSection bigint, primary key (idFiche))
create table Section (idSection bigint not null, name varchar(255), tableau_idTableau bigint, primary key (idSection))
create table Tableau (idTableau bigint not null, name varchar(255), user_idUser bigint, primary key (idTableau))
create table TypeSondage (sondage_type varchar(31) not null, idSondage bigint generated by default as identity (start with 1), libelle varchar(255), nbreSondage integer not null, primary key (idSondage))
create table User (idUser bigint not null, age integer not null, nom varchar(255), prenom varchar(255), primary key (idUser))
alter table Fiche add constraint FKi4eiurt1ecfdlsaojblf5d9fv foreign key (section_idSection) references Section
alter table Section add constraint FKgnvjc68f5bqqr1q9n3jpsko1r foreign key (tableau_idTableau) references Tableau
alter table Tableau add constraint FK22jwbpdvfxemiupfyj01ymmy6 foreign key (user_idUser) references User
INSERT INTO TABLEAU VALUES(1,'aaaaa',NULL)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
COMMIT
/*C8*/SET SCHEMA PUBLIC
INSERT INTO TABLEAU VALUES(2,'tableau 2',NULL)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 3
COMMIT
